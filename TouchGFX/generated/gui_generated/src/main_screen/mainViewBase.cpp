/*********************************************************************************/
/********** THIS FILE IS GENERATED BY TOUCHGFX DESIGNER, DO NOT MODIFY ***********/
/*********************************************************************************/
#include <gui_generated/main_screen/mainViewBase.hpp>
#include "BitmapDatabase.hpp"

mainViewBase::mainViewBase() :
    sliderValueChangedCallback(this, &mainViewBase::sliderValueChangedCallbackHandler)
{

    bkg.setXY(-1, 0);
    bkg.setBitmap(touchgfx::Bitmap(BITMAP_BEADS_BKG_ID));

    start.setPosition(0, 0, 480, 320);

    tgfx.setXY(141, 10);
    tgfx.setBitmap(touchgfx::Bitmap(BITMAP_TGFX_LOGO_WHITE_ID));
    tgfx.setWidth(300);
    tgfx.setHeight(300);
    tgfx.setBitmapPosition(50.000f, 100.000f);
    tgfx.setScale(1.000f);
    tgfx.setCameraDistance(1000.000f);
    tgfx.setOrigo(150.000f, 150.000f, 1000.000f);
    tgfx.setCamera(150.000f, 150.000f);
    tgfx.updateAngles(-0.250f, -0.250f, -0.250f);
    tgfx.setRenderingAlgorithm(touchgfx::TextureMapper::NEAREST_NEIGHBOR);
    tgfx.setAlpha(0);
    start.add(tgfx);

    tgfx_slider.setXY(36, 20);
    tgfx_slider.setBitmaps(touchgfx::Bitmap(BITMAP_SLIDER_BACKGROUND_ID), touchgfx::Bitmap(BITMAP_SLIDER_BACKGROUND_FILLED_ID), touchgfx::Bitmap(BITMAP_SLIDER_KNOB_CIRCLE_ID));
    tgfx_slider.setupVerticalSlider(13, 0, 0, 20, 220);
    tgfx_slider.setValueRange(0, 255);
    tgfx_slider.setValue(0);
    tgfx_slider.setNewValueCallback(sliderValueChangedCallback);
    start.add(tgfx_slider);

    add(bkg);
    add(start);
}

void mainViewBase::setupScreen()
{

}

//Handles when a key is pressed
void mainViewBase::handleKeyEvent(uint8_t key)
{
    if(28 == key)
    {
        //Main_to_clock
        //When hardware button 28 clicked change screen to Clock_screen
        //Go to Clock_screen with screen transition towards North
        application().gotoClock_screenScreenSlideTransitionNorth();
    }
}

void mainViewBase::sliderValueChangedCallbackHandler(const touchgfx::Slider& src, int value)
{
    if (&src == &tgfx_slider)
    {
        //tgfx_slider_Interaction
        //When tgfx_slider value changed execute C++ code
        //Execute C++ code
        tgfx.setAlpha(value);
        tgfx.invalidate();
    }
}
